{"version":3,"sources":["../../bin/express-cli.js"],"names":["ejs","require","fs","mkdirp","path","program","readline","sortedObject","util","cmd","MODE_0666","parseInt","MODE_0755","_exit","process","exit","pkg","version","around","fn","args","outputHelp","apply","unknown","before","_helpShown","_allowUnknownOption","name","usage","option","parse","argv","exited","main","obj","method","old","Array","arguments","length","i","call","confirm","msg","callback","rl","createInterface","input","stdin","output","stdout","question","close","test","copyTemplate","from","to","join","__dirname","write","readFileSync","createApplication","wait","console","log","complete","prompt","launchedFromCmd","app","loadTemplate","locals","modules","Object","create","uses","mkdir","run","description","private","engines","node","scripts","start","cacheDirectories","repository","type","url","keywords","dependencies","README","JSON","stringify","render","createAppName","pathName","basename","replace","toLowerCase","emptyDirectory","readdir","err","files","code","done","draining","streams","stderr","forEach","stream","platform","env","_","undefined","contents","destinationPath","shift","appName","resolve","empty","force","ok","destroy","error","renamedOption","originalName","newName","val","warning","format","message","split","line","str","mode","writeFileSync"],"mappings":"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","file":"express-cli.js","sourcesContent":["\n\nvar ejs = require('ejs')\nvar fs = require('fs')\nvar mkdirp = require('mkdirp')\nvar path = require('path')\nvar program = require('commander')\nvar readline = require('readline')\nvar sortedObject = require('sorted-object')\nvar util = require('util')\nvar cmd = require('node-cmd')\n\nvar MODE_0666 = parseInt('0666', 8)\nvar MODE_0755 = parseInt('0755', 8)\n\nvar _exit = process.exit\nvar pkg = require('../package.json')\n\nvar version = pkg.version\n\n// Re-assign process.exit because of commander\n// TODO: Switch to a different command framework\nprocess.exit = exit\n\n// CLI\n\naround(program, 'optionMissingArgument', function (fn, args) {\n  program.outputHelp()\n  fn.apply(this, args)\n  return { args: [], unknown: [] }\n})\n\nbefore(program, 'outputHelp', function () {\n  // track if help was shown for unknown option\n  this._helpShown = true\n})\n\nbefore(program, 'unknownOption', function () {\n  // allow unknown options if help was shown, to prevent trailing error\n  this._allowUnknownOption = this._helpShown\n\n  // show help if not yet shown\n  if (!this._helpShown) {\n    program.outputHelp()\n  }\n})\n\nprogram\n  .name('express')\n  .version(version, '    --version')\n  .usage('[options] [dir]')\n  .option('    --git', 'add .gitignore')\n  .option('-f, --force', 'force on non-empty directory')\n  .parse(process.argv)\n\nif (!exit.exited) {\n  main()\n}\n\n/**\n * Install an around function; AOP.\n */\n\nfunction around (obj, method, fn) {\n  var old = obj[method]\n\n  obj[method] = function () {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) args[i] = arguments[i]\n    return fn.call(this, old, args)\n  }\n}\n\n/**\n * Install a before function; AOP.\n */\n\nfunction before (obj, method, fn) {\n  var old = obj[method]\n\n  obj[method] = function () {\n    fn.call(this)\n    old.apply(this, arguments)\n  }\n}\n\n/**\n * Prompt for confirmation on STDOUT/STDIN\n */\n\nfunction confirm (msg, callback) {\n  var rl = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout\n  })\n\n  rl.question(msg, function (input) {\n    rl.close()\n    callback(/^y|yes|ok|true$/i.test(input))\n  })\n}\n\n/**\n * Copy file from template directory.\n */\n\nfunction copyTemplate (from, to) {\n  from = path.join(__dirname, '..', 'templates', from)\n  write(to, fs.readFileSync(from, 'utf-8'))\n}\n\n/**\n * Create application at the given directory `path`.\n *\n * @param {String} path\n */\n\nfunction createApplication (name, path) {\n  var wait = 5\n\n  console.log()\n  function complete () {\n    if (--wait) return\n    var prompt = launchedFromCmd() ? '>' : '$'\n\n    console.log()\n    console.log('   install dependencies:')\n    console.log('     %s cd %s && npm install', prompt, path)\n    console.log()\n    console.log('   run the app:')\n\n    if (launchedFromCmd()) {\n      console.log('     %s SET DEBUG=%s:* & npm start', prompt, name)\n    } else {\n      console.log('     %s DEBUG=%s:* npm start', prompt, name)\n    }\n\n    console.log()\n  }\n\n  // JavaScript\n  var app = loadTemplate('js/app.js');\n\n  // App modules\n  app.locals.modules = Object.create(null)\n  app.locals.uses = []\n\n  mkdir(path, function () {\n\n    cmd.run('create-react-app client')\n\n    mkdir(path + '/routes', function () {\n      copyTemplate('js/routes/index.js', path + '/routes/index.js')\n      complete()\n    })\n\n    // package.json\n    var pkg = {\n      name: name,\n      description: '',\n      version: '0.0.0',\n      private: true,\n      engines: {\n        node: '6.11.x'\n      },\n      scripts: {\n        start: 'babel-node --presets env app.js',\n        'start-dev': 'babel-watch --presets env app.js'\n      },\n      cacheDirectories: [\n        'node_modules',\n        'client/node_modules'\n      ],\n      repository: {\n        type: 'git',\n        url: ''\n      },\n      keywords: [\n        'node',\n        'create-react-app',\n        'react'\n      ],\n      dependencies: {\n        'body-parser': '~1.18.2',\n        'babel-cli': '~6.26.0',\n        'babel-core': '~6.26.0',\n        'babel-preset-env': '~1.6.1',\n        'express': '~4.15.5',\n        'socket.io': '~2.0.4',\n        'socket.io-client': '~2.0.4',\n        'underscore': '~1.8.3',\n        'dotenv': '~4.0.0'\n      }\n    }\n\n    // sort dependencies like npm(1)\n    pkg.dependencies = sortedObject(pkg.dependencies)\n\n    // REAMDE\n    const README = `#${name}`\n\n    // write files\n    write(path + '/package.json', JSON.stringify(pkg, null, 2) + '\\n')\n    write(path + '/app.js', app.render())\n    write(path + '/README.md', README)\n    write(path + '/dev-server.sh', app.render())\n\n    copyTemplate('js/gitignore', path + '/.gitignore')\n    copyTemplate('js/babelrc', path + '/.babelrc')\n\n    complete()\n  })\n}\n\n/**\n * Create an app name from a directory path, fitting npm naming requirements.\n *\n * @param {String} pathName\n */\n\nfunction createAppName (pathName) {\n  return path.basename(pathName)\n    .replace(/[^A-Za-z0-9.()!~*'-]+/g, '-')\n    .replace(/^[-_.]+|-+$/g, '')\n    .toLowerCase()\n}\n\n/**\n * Check if the given directory `path` is empty.\n *\n * @param {String} path\n * @param {Function} fn\n */\n\nfunction emptyDirectory (path, fn) {\n  fs.readdir(path, function (err, files) {\n    if (err && err.code !== 'ENOENT') throw err\n    fn(!files || !files.length)\n  })\n}\n\n/**\n * Graceful exit for async STDIO\n */\n\nfunction exit (code) {\n  // flush output for Node.js Windows pipe bug\n  // https://github.com/joyent/node/issues/6247 is just one bug example\n  // https://github.com/visionmedia/mocha/issues/333 has a good discussion\n  function done () {\n    if (!(draining--)) _exit(code)\n  }\n\n  var draining = 0\n  var streams = [process.stdout, process.stderr]\n\n  exit.exited = true\n\n  streams.forEach(function (stream) {\n    // submit empty write request and wait for completion\n    draining += 1\n    stream.write('', done)\n  })\n\n  done()\n}\n\n/**\n * Determine if launched from cmd.exe\n */\n\nfunction launchedFromCmd () {\n  return process.platform === 'win32' &&\n    process.env._ === undefined\n}\n\n/**\n * Load template file.\n */\n\nfunction loadTemplate (name) {\n  var contents = fs.readFileSync(path.join(__dirname, '..', 'templates', (name + '.ejs')), 'utf-8')\n  var locals = Object.create(null)\n\n  function render () {\n    return ejs.render(contents, locals)\n  }\n\n  return {\n    locals: locals,\n    render: render\n  }\n}\n\n/**\n * Main program.\n */\n\nfunction main () {\n  // Path\n  var destinationPath = program.args.shift() || '.'\n\n  // App name\n  var appName = createAppName(path.resolve(destinationPath)) || 'hello-world'\n    \n  // Generate application\n  emptyDirectory(destinationPath, function (empty) {\n    if (empty || program.force) {\n      createApplication(appName, destinationPath)\n    } else {\n      confirm('destination is not empty, continue? [y/N] ', function (ok) {\n        if (ok) {\n          process.stdin.destroy()\n          createApplication(appName, destinationPath)\n        } else {\n          console.error('aborting')\n          exit(1)\n        }\n      })\n    }\n  })\n}\n\n/**\n * Mkdir -p.\n *\n * @param {String} path\n * @param {Function} fn\n */\n\nfunction mkdir (path, fn) {\n  mkdirp(path, MODE_0755, function (err) {\n    if (err) throw err\n    console.log('   \\x1b[36mcreate\\x1b[0m : ' + path)\n    fn && fn()\n  })\n}\n\n/**\n * Generate a callback function for commander to warn about renamed option.\n *\n * @param {String} originalName\n * @param {String} newName\n */\n\nfunction renamedOption (originalName, newName) {\n  return function (val) {\n    warning(util.format(\"option `%s' has been renamed to `%s'\", originalName, newName))\n    return val\n  }\n}\n\n/**\n * Display a warning similar to how errors are displayed by commander.\n *\n * @param {String} message\n */\n\nfunction warning (message) {\n  console.error()\n  message.split('\\n').forEach(function (line) {\n    console.error('  warning: %s', line)\n  })\n  console.error()\n}\n\n/**\n * echo str > path.\n *\n * @param {String} path\n * @param {String} str\n */\n\nfunction write (path, str, mode) {\n  fs.writeFileSync(path, str, { mode: mode || MODE_0666 })\n  console.log('   \\x1b[36mcreate\\x1b[0m : ' + path)\n}\n"]}